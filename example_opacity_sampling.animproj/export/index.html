<!DOCTYPE html>
<html style="height:100%;">
<!-- Sencha Animator Version: 1.5 Build: 219 -->
<head>
<meta charset="UTF-8">


<title>example_opacity_sampling &middot; Made with Sencha Animator</title>


<script type="text/javascript">
/*
 * Sencha Animator 2013, all rights reserved
 */
if(typeof(AN)==="undefined"){var AN={}}AN.instances={symbols:[],controllers:[]};AN.apiVersion=1;
/*
 * Sencha Animator 2013, all rights reserved
 */
AN.Controller=function(){return{currentScene:false,userData:{},setConfig:function(a){AN.instances.controllers.push(this);this.events=a.events;this.prefix=a.cssPrefix;this.projectActions=a.projectActions;this.basePath=a.basePath?a.basePath:"";this.olElement=document.querySelector("#"+a.parentId+" ol");var d=this.olElement.children;this.useOrmma=a.ormma;this.scenes=[];this.scenesById={};this.sceneByName={};var g;for(var e=0;e<a.scenes.length;e++){g=a.scenes[e];g.element=d[e];g.timelinesById={};g.timelinesByName={};for(var c=0;c<g.timelines.length;c++){g.timelinesById[g.timelines[c].id]=g.timelines[c];g.timelinesByName[g.timelines[c].name]=g.timelines[c]}this.scenesById[g.id]=g;this.scenes.push(g);if(g.name){this.sceneByName[g.name]=g}}this.setupListeners();this.startSceneByName=this.goToSceneByName;this.startSceneById=this.goToSceneById;this.startSceneByID=this.startSceneById;this.symbolInstancesByHtmlId={};this.symbolInstancesById={};this.symbols=[];var h,b,f;for(var e=0;e<a.symbols.length;e++){h=a.symbols[e];this.symbolInstancesById[h.id]=[];b=this.olElement.querySelectorAll(".an-symbol-container-"+h.id);for(var c=0;c<b.length;c++){f=new AN.Symbol();f.setConfig(b[c],h,this);this.symbolInstancesByHtmlId[b[c].id]=f;this.symbolInstancesById[h.id].push(f);this.symbols.push(f)}}this.fireAction(this.projectActions,"init");this.goToScene(this.scenes[0])},setupListeners:function(){var l=this;this.browser="unknown";if(document.body.style.MozAnimationName!==undefined){this.browser="moz"}function h(j){var i;if(l.browser==="moz"){i=j.target;while(i=i.parentNode){if(i===l.currentScene.element){l.onAnimationEnd();return}}}else{l.onAnimationEnd()}}this.olElement.addEventListener("webkitAnimationEnd",h,false);this.olElement.addEventListener("animationend",h,false);function c(i){i.element.addEventListener("mousemove",function(j){i.mousemoveAction.call(l.userData,l,j)},false)}var g;for(var e=0;e<this.scenes.length;e++){g=this.scenes[e];if(g.mousemoveAction){c(g)}}function a(m,j,i){m.addEventListener(j,function(n){i.call(l.userData,l,n)},false)}var f,b,k;for(var e=0;e<this.events.length;e++){b=this.events[e];k=b.type;f=document.getElementById(b.id);for(var d=0;d<k.length;d++){a(f,k[d],b.handler)}}},onAnimationEnd:function(){this.runningAnimationCount--;if(this.runningAnimationCount===0){this.onAllAnimationEnd()}},onAllAnimationEnd:function(){var a=this.currentScene.currentTimeline.endWaitTime;if(a){var b=this;this.sceneTimeout=setTimeout(function(){b.onSceneFinish()},a*1000)}else{this.onSceneFinish()}},forceRefresh:function(a){this.forceRefreshValue=a.element.offsetHeight},fireAction:function(b,a){if(b&&b[a]){b[a].call(this.userData,this)}},getSymbolByHtmlId:function(a){return this.symbolInstancesByHtmlId[a]},getSymbolByInstanceId:function(b){var a=this.olElement.querySelector(".an-symbol-container.an-symbol-"+b);return this.getSymbolByHtmlId(a.id)},getSymbols:function(){return this.symbols},getSymbolsBySymbolMasterId:function(a){return this.symbolInstancesById[a]},getUserData:function(){return this.userData},getTimelineByIndex:function(a){return this.currentScene.timelines[a]},getTimelineById:function(a){return this.currentScene.timelinesById[a]},getTimelineByName:function(a){return this.currentScene.timelinesByName[a]},getCurrentTimeline:function(){return this.currentScene.currentTimeline},getCurrentScene:function(){return this.currentScene},getSceneByIndex:function(a){return this.scenes[a]},getSceneById:function(a){return this.scenesById[a]},getSceneByName:function(a){return this.sceneByName[a]},goToNextTimeline:function(){var b=this.currentScene.timelines.indexOf(this.currentScene.currentTimeline);var a=Math.min(b+1,this.currentScene.timelines.length-1);if(a===b){return}this.goToTimelineByIndex(a)},goToPreviousTimeline:function(){var b=this.currentScene.timelines.indexOf(this.currentScene.currentTimeline);var a=Math.max(b-1,0);if(b===a){return}this.goToTimelineByIndex(a)},goToTimelineById:function(a){this.goToScene(this.currentScene,this.currentScene.timelinesById[a])},goToTimelineByName:function(a){this.goToScene(this.currentScene,this.currentScene.timelinesByName[a])},goToTimelineByIndex:function(a){this.goToScene(this.currentScene,this.currentScene.timelines[a])},goToTimeline:function(a){this.goToScene(this.currentScene,a)},goToNextScene:function(){var b=this.scenes.indexOf(this.currentScene);var a=Math.min(b+1,this.scenes.length-1);if(b===a){return}this.goToSceneByIndex(a)},goToPreviousScene:function(){var a=this.scenes.indexOf(this.currentScene);var b=Math.max(a-1,0);if(a===b){return}this.goToSceneByIndex(b)},goToSceneByIndex:function(a){this.goToScene(this.scenes[a])},goToSceneByName:function(a){this.goToScene(this.sceneByName[a])},goToSceneById:function(a,b){var c=this.scenesById[a];this.goToScene(c,c.timelinesById[b])},goToScene:function(g,f){var d=g;var e=this.currentScene;var a=f;var c=e?e.currentTimeline:false;if(a===undefined){a=d.timelines[0]}var b=false;if(c===a&&e===d){b=true}else{if(e){e.element.setAttribute("class","")}}this.fireAction(c,"exitAction");clearTimeout(this.sceneTimeout);if(e!==d){this.fireAction(e,"exitAction");this.fireAction(d,"initAction")}this.fireAction(a,"initAction");this.runningAnimationCount=a.animationCount;this.currentScene=d;d.currentTimeline=a;var h="t-"+a.id;if(b||this.browser==="moz"){d.element.setAttribute("class","run restart "+h);this.forceRefresh(d)}d.element.setAttribute("class","run "+h);if(!b&&this.useOrmma){this.ormmaNextScene(d)}this.fireAction(a,"startAction");if(a.animationCount===0){this.onAllAnimationEnd()}},replayScene:function(){console.warn("replayScene is deprecated. Use restartScene instead.");this.restartScene()},restartScene:function(){this.goToScene(this.currentScene)},restartTimeline:function(){this.goToScene(this.currentScene,this.currentScene.currentTimeline)},onSceneFinish:function(){this.fireAction(this.currentScene.currentTimeline,"endAction")},goToURL:function(a){document.location.href=a},getElementById:function(a){return document.getElementById(this.getElementIdById(a))},getElementIdById:function(a){return this.prefix+a},getUrlForLocalAsset:function(b){var a="assets/"+b;if(this.basePath){a=this.basePath+"/"+a}return a},ormmaNextScene:function(c){var a=ormma.getState();if(c.dimensions.expanded){var i=ormma.getMaxSize();if(a!=="expanded"){ormma.expand({x:0,y:0,width:i.width,height:i.height})}var b="";var d=c.element.offsetHeight;var g=c.element.offsetWidth;var e=(i.height-d)/2;var h=(i.width-g)/2;b+=" translate3d("+Math.round(h)+"px,"+Math.round(e)+"px,0)";if(c.dimensions.fit){var f=Math.min(i.width/g,i.height/d);b+=" scale3d("+f+","+f+",1)"}c.element.style.webkitTransform=b}else{if(a==="expanded"){ormma.close()}ormma.resize(c.dimensions.width,c.dimensions.height)}}}};
window.addEventListener('load', function(){
    var configData = {
        parentId: 'an-anim',
        cssPrefix: '',
        ormma: false,
        mraid: false,
        layout: {"type":"absolute","width":480,"height":320},
        scenes: [{id: 0,dimensions: {height: 100,width: 100,expanded: false,fit: false},initAction: function(controller,event,symbolController) {
this.imgData, //where we will store img dat
this.imageWidth = 60, //width of the image
this.imageHeight = 89; //height of the image
   
this.initCanvas = function(image) {
    var canvas = document.createElement("canvas");
    canvas.setAttribute("id", "samplingCanvas");
    canvas.setAttribute("width", this.imageWidth);
    canvas.setAttribute("height", this.imageHeight);
    //document.body.appendChild(canvas);
    var ctx = canvas.getContext('2d');
    
    ctx.drawImage(image, 0, 0); //draw image at 0,0 coordinates
    imgData = ctx.getImageData(0, 0, this.imageWidth, this.imageHeight); //sample image
}

}, timelines: [{id: "0",name: 'Timeline 1',animationCount: 0,duration: 2.465,lastKeyframeTime: 2.465},{id: "xGgYhj",name: 'Timeline 2',animationCount: 1,duration: 1,lastKeyframeTime: 1,endAction: function(controller) {
controller.goToPreviousTimeline();
}}]}],
        symbols: [],
        projectActions: {},
        events: [{id: "logo",type: ['click'],handler: function(controller,event,symbolController) {
var imagePosition = {
        x: controller.getElementById('logo').getBoundingClientRect().left,
        y: controller.getElementById('logo').getBoundingClientRect().top,
    },
    mousePosition = {
        x: event.x - imagePosition.x,
        y: event.y - imagePosition.y
    },
    pixelPosition,
    alpha;

if (!this.imgData) { 
    this.initCanvas(controller.getElementById('logo').children[0].children[0]);
}

pixelPosition = 4*(mousePosition.x + this.imageWidth*mousePosition.y), //pixel values in the canvas data
alpha = imgData.data[pixelPosition+3]; //position of alpha value

if (alpha > 0) {
	controller.goToNextTimeline();
    controller.getElementById('report').innerHTML = 'Clicked inside the logo:<br>X: ' + mousePosition.x + ', Y: ' + mousePosition.y + ', alpha: ' + alpha;
} else {
    controller.getElementById('report').innerHTML = 'Clicked outside the logo:<br>X: ' + mousePosition.x + ', Y: ' + mousePosition.y + ', alpha: ' + alpha;
}



}}],
        externalResources: []
    };
    setTimeout(function(){
       var controller = new AN.Controller;
       controller.setConfig(configData);
    },0);
}, false);
</script>


<style type="text/css">

#an-anim > ol{list-style:none;margin:0;padding:0;}#an-anim > ol > li{margin:0;padding:0;display:none;}#an-anim > ol > li.run{display:block;}#an-anim .an-stage{overflow:hidden;margin:0;padding:0;}#an-anim .an-stage div{position:absolute;}.an-stage *{margin:0;padding:0;font-smoothing:antialiased;-webkit-font-smoothing:antialiased;}#an-anim .an-stage img{position:absolute;top:0;left:0;}#an-anim .AN-Scene-Description{display:none;}#an-anim iframe{border:none;height:100%;width:100%}#an-anim .an-stage{position:absolute;top:0;left:0;width:100%;height:100%;}#an-anim{height:320px;width:480px;position:relative;}#an-anim{background-color:rgba(230,230,230,1);font-family:"Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;font-size:12px;line-height:1.3;background-image:radial-gradient( ellipse farthest-corner at 50% 50%, rgba(255,255,255,1) 19.231%,rgba(82,82,82,1) 100%);background-image:-webkit-radial-gradient(50% 50%, ellipse farthest-corner, rgba(255,255,255,1) 19.231%,rgba(82,82,82,1) 100%);}#logo{transform:translate3d(210px, 115px, 0px);-webkit-transform:translate3d(210px, 115px, 0px);width:60px;height:89px;top:0;left:0;}@-webkit-keyframes ani-logo-xGgYhj{0%{-webkit-transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);-webkit-animation-timing-function:ease-out;}27%{-webkit-transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-60deg);-webkit-animation-timing-function:ease-out;}100%{-webkit-transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(720deg);-webkit-animation-timing-function:linear;}}@keyframes ani-logo-xGgYhj{0%{transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);animation-timing-function:ease-out;}27%{transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(-60deg);animation-timing-function:ease-out;}100%{transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(720deg);animation-timing-function:linear;}}.run.t-xGgYhj #logo{animation-name:ani-logo-xGgYhj;-webkit-animation-name:ani-logo-xGgYhj;animation-duration:1s;-webkit-animation-duration:1s;animation-delay:0s;-webkit-animation-delay:0s;animation-fill-mode:both;-webkit-animation-fill-mode:both;}.t-xGgYhj #logo{transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(720deg);-webkit-transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(720deg);animation-timing-function:linear;-webkit-animation-timing-function:linear;}.restart.t-xGgYhj #logo{transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);-webkit-transform:translate3d(210px, 115px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg);animation-timing-function:ease-out;-webkit-animation-timing-function:ease-out;}.restart #logo{animation-name:none !important;-webkit-animation-name:none !important;}#an-obj-2{transform:translate3d(14px, 246px, 0px);-webkit-transform:translate3d(14px, 246px, 0px);width:140px;height:60px;top:0;left:0;font-style:italic;font-weight:300;;}.t-0 #an-obj-2{transform:translate3d(14px, 246px, 0px);-webkit-transform:translate3d(14px, 246px, 0px);}#report{transform:translate3d(313px, 275px, 0px);-webkit-transform:translate3d(313px, 275px, 0px);width:151px;height:31px;top:0;left:0;font-style:italic;font-weight:300;;text-align:right;}.t-0 #report{transform:translate3d(313px, 275px, 0px);-webkit-transform:translate3d(313px, 275px, 0px);}
</style>



</head>
<body style="margin:0; height: 100%;">
<div id="an-anim"><ol>

<li id="an-scene-0" >
<div class="an-stage">
<div id="logo"><div><img  height="89" width="60"  src="assets/sencha.png"></div></div>
<div id="an-obj-2"><span>Only clicking on the logo will trigger the animation. Clicking on transparent parts will not.</span></div>
<div id="report"></div>
</div>
</li>

</ol></div>

</body>
</html>